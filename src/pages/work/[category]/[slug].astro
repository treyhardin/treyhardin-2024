---
import type { GetStaticPaths } from "astro";
import Layout from '../../../layouts/Layout.astro';
import { getProjects } from '../../../utils/sanityClient';
import ProjectHero from "../../../components/sections/work/Project_Hero.astro";
import ProjectInfo from "../../../components/sections/work/Project_Info.astro";


export async function getStaticPaths() {

  const data = await getProjects()

  interface Props {
    title: string
  }
  
  return data.map((project) => {
    return {
      params: { category: project.projectTypeSlug.current, slug: project.slug.current },
      props: { project }
    }
  })
};

const { slug } = Astro.params;
const { project } = Astro.props;
console.log(project)

---
<Layout 
  title={project.title}
>
  <ProjectHero
    title={project.title}
    subtitle={project.subtitle}
    projectType={project.projectType}
    projectTypeSlug={project.projectTypeSlug}
    image={project.mainImage}
    imageAlt={project.imageAlt}
  />
  <ProjectInfo
    title={project.title}
    excerpt={project.excerpt}
    technologies={project.technologies}
  />
</Layout>