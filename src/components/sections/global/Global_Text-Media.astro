---
import { Icon } from "astro-icon/components";
import { urlFor } from "../../../utils/sanityClient";

const { content } = Astro.props;
// console.log(content)
---
<section class="text-media">
    <span class="media">
        <img 
            sizes="100vw, (min-width: 768px) 75vw"
            width="1024"
            height="768"
            srcset={`
                ${urlFor(content.image).width(400).height(300).auto('format').url()} 400w,
                ${urlFor(content.image).width(600).height(450).auto('format').url()} 600w,
                ${urlFor(content.image).width(768).height(576).auto('format').url()} 768w,
                ${urlFor(content.image).width(960).height(720).auto('format').url()} 960w,
                ${urlFor(content.image).width(1024).height(768).auto('format').url()} 1024w,
                ${urlFor(content.image).width(1280).height(960).auto('format').url()} 1280w,
                ${urlFor(content.image).width(1440).height(1080).auto('format').url()} 1440w,
                ${urlFor(content.image).width(1800).height(1350).auto('format').url()} 1800w,
                ${urlFor(content.image).width(2160).height(1620).auto('format').url()} 2160w,
            `}
            class="image"
            src={urlFor(content.image).width(1024).height(768).auto('format').url()}
            alt={content.imageAlt}
        />
    </span>
    <span class="text">
        <div class="section-title">
            <h2 class="utility">{content.heading}</h2>
            <Icon name="star" />
        </div>
        <p class="caption">{content.description}</p>
    </span>
</section>

<style>
    .text-media {
        display: flex;
        flex-direction: row;
        justify-content: stretch;
        align-items: stretch;
        padding: var(--page-margin);
        gap: var(--space-3xs);
    }

    .media {
        flex: 1 1 auto;
        border-radius: var(--radius-md);
        overflow: hidden;
        aspect-ratio: 4 / 3;
    }

    .image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .text {
        flex: 0 0 40ch;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: stretch;
        padding: var(--space-3xs) 0;
    }

    .section-title {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        justify-content: space-between;
    }

    @media screen and (max-width: 768px) {
        .text-media {
            flex-direction: column-reverse;
            justify-content: flex-start;
            align-items: stretch;
        }

        .text {
            justify-content: flex-start;
            gap: var(--space-3xs);
            flex: 0 0 auto;
        }
    }
</style>